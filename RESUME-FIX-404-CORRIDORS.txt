â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ”— ANALYSE FIX 404 CORRIDORS (Commit a278843)                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CE QUE TU AS RÃ‰SOLU (PARTIE VISIBLE)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ProblÃ¨me: URLs comme /paris-vers-marseille/ â†’ 404

Cause: Route /_corridor/[from]/[to]/ (prÃ©fixe _ = privÃ©e, inaccessible)

Solution: 
  â€¢ Renommage: app/_corridor/ â†’ app/corridor/ (sans _)
  â€¢ Middleware: rewrite vers /corridor/ au lieu de /_corridor/
  â€¢ Fix typo: saint-etienne (clÃ© correcte dans CITY_COORDS)
  â€¢ Maillage interne: ajout de 6 liens corridor sur pages ville
  â€¢ Navigation: lien vers ville destination dans breadcrumb

RÃ©sultat: âœ… Les URLs /paris-vers-marseille/ fonctionnent maintenant


âš ï¸  EFFETS DE BORD POTENTIELS (TES DOUTES)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. ğŸŸ¡ Distances sous-estimÃ©es (PRIORITÃ‰ 1)
   ProblÃ¨me: estimateRoadDistanceKm utilise Haversine (vol d'oiseau)
   Impact: 
     â€¢ Paris-Marseille: ~660 km calculÃ©, ~775 km rÃ©el (-15%)
     â€¢ Prix et temps sous-estimÃ©s â†’ perte de crÃ©dibilitÃ©
   
   Solution: Ajouter facteur de correction Ã—1.2
   
   lib/corridors.ts:
     const rawDistance = haversineDistance(...);
     const factor = rawDistance < 100 ? 1.1 : rawDistance < 300 ? 1.15 : 1.2;
     return Math.round(rawDistance * factor);

2. ğŸŸ¡ Saint-Ã‰tienne avec accent (PRIORITÃ‰ 2)
   ProblÃ¨me: /saint-Ã©tienne-vers-lyon/ â†’ 404 (accent non gÃ©rÃ©)
   Impact: Utilisateurs tapant accent â†’ 404
   
   Solution: Redirect 301 dans next.config.mjs
   
   {
     source: '/saint-Ã©tienne-vers-:to',
     destination: '/saint-etienne-vers-:to',
     permanent: true,
   }

3. ğŸŸ¢ Duplication de contenu (DÃ‰JÃ€ GÃ‰RÃ‰)
   Risque: Page accessible via 2 URLs
     â€¢ /paris-vers-marseille/ (publique, via middleware)
     â€¢ /corridor/paris/marseille/ (directe, route Next.js)
   
   Status: âœ… Canonical URLs OK (via getFullMetadata)
   â†’ Google indexera seulement /{from}-vers-{to}/

4. ğŸŸ¢ Performance SSG (DÃ‰JÃ€ GÃ‰RÃ‰)
   Risque: 380 pages corridor (20 villes Ã— 19 destinations)
   Status: âœ… ISR en place (dynamicParams = true)
   â†’ Pages gÃ©nÃ©rÃ©es Ã  la demande, pas de build lent

5. ğŸŸ¢ Maillage interne (OK)
   Changement: Ajout de 6 liens corridor sur chaque page ville
   Status: âœ… Raisonnable, bon pour SEO


ğŸ“Š MATRICE DES RISQUES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Effet de bord           â”‚ ProbabilitÃ© â”‚ Impact â”‚ Action requise           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Distances sous-estimÃ©es â”‚ ğŸŸ¡ Moyenne  â”‚ ğŸŸ¡ Moy â”‚ Facteur Ã—1.2             â”‚
â”‚ Saint-Ã‰tienne accent    â”‚ ğŸŸ¡ Moyenne  â”‚ ğŸŸ¢ Fai â”‚ Redirect 301             â”‚
â”‚ Duplication contenu     â”‚ ğŸŸ¢ Faible   â”‚ ğŸŸ¢ Fai â”‚ Canonical OK âœ…          â”‚
â”‚ Performance SSG         â”‚ ğŸŸ¢ Faible   â”‚ ğŸŸ¢ Fai â”‚ ISR OK âœ…                â”‚
â”‚ Maillage agressif       â”‚ ğŸŸ¢ Faible   â”‚ ğŸŸ¢ Fai â”‚ 6 liens OK âœ…            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GravitÃ© globale: ğŸŸ¢ FAIBLE


ğŸ¯ ACTIONS IMMÃ‰DIATES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PrioritÃ© 1: Corriger les distances (5 min)
  â†’ lib/corridors.ts: ajouter facteur Ã—1.2
  â†’ Impact: Distances plus rÃ©alistes, meilleure crÃ©dibilitÃ©

PrioritÃ© 2: Redirect Saint-Ã‰tienne (2 min)
  â†’ next.config.mjs: ajouter redirect /saint-Ã©tienne-vers-:to
  â†’ Impact: Moins de 404, meilleure UX

PrioritÃ© 3: Surveiller GSC (J+7)
  â†’ Google Search Console â†’ Pages â†’ Chercher /corridor/
  â†’ VÃ©rifier qu'aucune URL n'est indexÃ©e


âœ… CHECKLIST RAPIDE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Tests:
  â–¡ /paris-vers-marseille/ â†’ 200 âœ…
  â–¡ /saint-etienne-vers-lyon/ â†’ 200 âœ…
  â–¡ /saint-Ã©tienne-vers-lyon/ â†’ 404 ? (ajouter redirect)
  â–¡ Distances cohÃ©rentes avec Google Maps ? (ajouter facteur)

Actions:
  â–¡ Ajouter facteur Ã—1.2 pour distances
  â–¡ Ajouter redirect 301 Saint-Ã‰tienne
  â–¡ Surveiller GSC pendant 30 jours


ğŸš€ VERDICT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

TON COMMIT EST SAFE âœ…

Aucun risque d'outage:
  âœ“ RÃ©sout le problÃ¨me des 404 corridor
  âœ“ Canonical URLs bien gÃ©rÃ©es (pas de duplication)
  âœ“ ISR en place (pas de problÃ¨me de performance)
  âœ“ Maillage interne raisonnable (6 liens)

Seuls ajustements recommandÃ©s:
  1. Corriger les distances (crÃ©dibilitÃ©)
  2. Redirect Saint-Ã‰tienne avec accent (UX)

Sinon, dÃ©ploie en confiance! ğŸ’ª


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Pour plus de dÃ©tails, ouvre: ANALYSE-FIX-404-CORRIDORS.md ou TL-DR-FIX-404-CORRIDORS.md
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
